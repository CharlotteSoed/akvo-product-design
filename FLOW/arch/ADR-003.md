## ADR 003: Browser-based submission of survey form responses

## Context

In certain cases organisations would like to take advantage of the AkvoFLOW data gathering capabilities but due to their (organistions') nature, they do not require the mobile app to fill out survey forms.  They instead require the possibility to fill out and submit survey forms through a web browser.

The implementation of this feature occurs at a moment in which we are in the process of migrating the entire Akvo FLOW backend functionality away from being hosted on GAE infrastructure.

The requirement of the possibility to fill in and submit responses through a browser-based interface is also applicable beyond AkvoFLOW and is relevant for other products developed by Akvo.

## Decision

* We will avoid as much as possible making any modification to the GAE component and  implement this functionality as a service that interacts with the GAE component.

* We will split the implementation of the functionality into two components, a client and a backend server component.

* The client component will handle downloading of an XML representation of form definitions (currently also used by Akvo FLOW mobile app), and parsing and rendering of these form definitions for the respondent, as well as submitting the final user responses to the server component.

* The client will store responses locally until submit time.

* The server component will receive the responses submitted by the client, transform the responses to the correct format, persist them as a file in the object store and finally notify the GAE component to process them.

## Status

Proposed

## Consequences

* We will create minimal to no code modifications within the GAE component also avoiding the possible need for reimplementation at a later stage.

* Using the existing survey definition (XML) format enables organisations to take advantage of survey forms that have already been defined.

* Storing the responses locally till submission implies the possibility of data loss incase a browser/computer crashes.

* Downloading the form definitions from the object store creates the dependency on the object store, i.e., if its not available then no responses can be filled in.

